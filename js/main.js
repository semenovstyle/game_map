const _0x1ed99c=_0x1b80;function _0x1b80(_0x36405e,_0x2babf7){const _0x14b58b=_0x14b5();return _0x1b80=function(_0x1b8091,_0x26eaab){_0x1b8091=_0x1b8091-0x106;let _0x7e6630=_0x14b58b[_0x1b8091];return _0x7e6630;},_0x1b80(_0x36405e,_0x2babf7);}(function(_0xbee0ed,_0x316b2e){const _0x2c8c06=_0x1b80,_0x557f2e=_0xbee0ed();while(!![]){try{const _0x31883c=parseInt(_0x2c8c06(0x132))/0x1+-parseInt(_0x2c8c06(0x10d))/0x2+parseInt(_0x2c8c06(0x12e))/0x3*(-parseInt(_0x2c8c06(0x133))/0x4)+parseInt(_0x2c8c06(0x142))/0x5*(-parseInt(_0x2c8c06(0x107))/0x6)+parseInt(_0x2c8c06(0x109))/0x7*(-parseInt(_0x2c8c06(0x11e))/0x8)+parseInt(_0x2c8c06(0x124))/0x9+parseInt(_0x2c8c06(0x13c))/0xa*(parseInt(_0x2c8c06(0x131))/0xb);if(_0x31883c===_0x316b2e)break;else _0x557f2e['push'](_0x557f2e['shift']());}catch(_0x4f6ea0){_0x557f2e['push'](_0x557f2e['shift']());}}}(_0x14b5,0x3f859));import*as _0x310de5 from'./quest.js';import*as _0x195ebf from'./ui.js';let config,html5QrCode,sound,debugUrlInput,debugSubmitBtn;function processScannedUrl(_0x340935){const _0x180f06=_0x1b80;try{const _0x2a8735=new URL(_0x340935)[_0x180f06(0x12f)][_0x180f06(0x11c)](_0x180f06(0x12d));if(!_0x2a8735||!config[_0x180f06(0x115)][_0x2a8735])return void _0x195ebf[_0x180f06(0x148)](config['feedback'][_0x180f06(0x10f)]);_0x310de5['unlockPart'](_0x2a8735)?(sound['play'](),_0x310de5[_0x180f06(0x11f)](),_0x195ebf[_0x180f06(0x138)](_0x310de5[_0x180f06(0x113)]()),_0x195ebf[_0x180f06(0x13d)](_0x310de5[_0x180f06(0x10e)](),config[_0x180f06(0x134)]),_0x195ebf[_0x180f06(0x125)](config[_0x180f06(0x115)][_0x2a8735])):_0x195ebf['showFeedbackToast'](config[_0x180f06(0x139)][_0x180f06(0x121)]);}catch(_0x2765f3){console[_0x180f06(0x111)]('Ошибка\x20обработки\x20QR-кода:',_0x2765f3),_0x195ebf[_0x180f06(0x148)](config['feedback'][_0x180f06(0x10f)]);}}function onScanSuccess(_0x1fd0f7){const _0x24f68a=_0x1b80;_0x195ebf['hideScanner'](),html5QrCode['stop']()[_0x24f68a(0x10a)](_0x432206=>console['warn'](_0x24f68a(0x108),_0x432206)),processScannedUrl(_0x1fd0f7);}function setupEventListeners(){const _0x54b4a1=_0x1b80;_0x195ebf[_0x54b4a1(0x114)]['enableSoundBtn'][_0x54b4a1(0x11b)](_0x54b4a1(0x141),()=>{const _0x13acfe=_0x54b4a1;sound['play'](),sound[_0x13acfe(0x10b)](),sound[_0x13acfe(0x129)]=0x0,_0x195ebf[_0x13acfe(0x118)](),_0x195ebf['showQuestUI'](),_0x195ebf[_0x13acfe(0x146)]();}),_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x144)][_0x54b4a1(0x11b)](_0x54b4a1(0x141),()=>{const _0x2ba291=_0x54b4a1;_0x195ebf['showScanner'](),html5QrCode[_0x2ba291(0x126)]({'facingMode':'environment'},{'fps':0xa,'qrbox':{'width':0xfa,'height':0xfa}},onScanSuccess,()=>{})[_0x2ba291(0x10a)](_0x27c3bd=>{const _0x2b7536=_0x2ba291;console[_0x2b7536(0x111)]('Не\x20удалось\x20запустить\x20сканер:',_0x27c3bd),_0x195ebf['hideScanner'](),_0x195ebf['showFeedbackToast'](_0x2b7536(0x12a));});}),_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x127)][_0x54b4a1(0x11b)](_0x54b4a1(0x141),()=>{const _0xc4e167=_0x54b4a1;html5QrCode[_0xc4e167(0x13b)]()[_0xc4e167(0x10a)](_0x3d97cc=>console['warn'](_0xc4e167(0x108),_0x3d97cc)),_0x195ebf['hideScanner']();}),_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x116)][_0x54b4a1(0x11b)](_0x54b4a1(0x141),()=>{const _0x144883=_0x54b4a1;_0x195ebf[_0x144883(0x122)](),_0x310de5[_0x144883(0x143)](config['totalParts'])&&_0x195ebf[_0x144883(0x145)](config[_0x144883(0x149)]);}),_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x128)]&&_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x128)]['addEventListener']('click',()=>{const _0x31794=_0x54b4a1;_0x310de5[_0x31794(0x12b)](),window[_0x31794(0x13f)][_0x31794(0x14b)]();}),_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x140)]&&_0x195ebf['elements'][_0x54b4a1(0x140)]['addEventListener'](_0x54b4a1(0x141),()=>{const _0x29b5ab=_0x54b4a1;_0x195ebf[_0x29b5ab(0x137)]();}),_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x135)]&&_0x195ebf[_0x54b4a1(0x114)][_0x54b4a1(0x135)][_0x54b4a1(0x11b)](_0x54b4a1(0x141),()=>{const _0x14d5e1=_0x54b4a1;confirm('Вы\x20уверены,\x20что\x20хотите\x20начать\x20квест\x20заново?\x20Весь\x20прогресс\x20будет\x20утерян.')&&(_0x310de5[_0x14d5e1(0x12b)](),window['location'][_0x14d5e1(0x14b)]());}),debugSubmitBtn&&debugUrlInput&&debugSubmitBtn[_0x54b4a1(0x11b)](_0x54b4a1(0x141),()=>{const _0x430f72=_0x54b4a1,_0x53c530=debugUrlInput[_0x430f72(0x106)];_0x53c530&&(processScannedUrl(_0x53c530),debugUrlInput['value']='');});}function _0x14b5(){const _0x2cdac1=['2467854iiHiYO','showHint','start','cancelScanBtn','resetBtn','currentTime','Не\x20удалось\x20получить\x20доступ\x20к\x20камере.','resetProgress','welcomeTitle','part','234393buzPps','searchParams','getElementById','9197639RLuTLq','170858ArYmrW','12IaDqrn','totalParts','globalResetBtn','hideGlobalResetBtn','toggleActivePanzoomView','updatePuzzleView','feedback','debug-url-input','stop','10AHJpeJ','updateProgressIndicator','json','location','resetViewBtn','click','476260kvKkzN','isComplete','scanBtn','showFinalScreen','showGlobalResetBtn','welcomeText','showFeedbackToast','congratsMessage','qr-reader','reload','value','18umuxNg','Сканер\x20уже\x20был\x20остановлен:','36253QxxWVp','catch','pause','DOMContentLoaded','742808UXXzjI','getUnlockedCount','invalidQR','Ошибка\x20загрузки\x20квеста.\x20Пожалуйста,\x20обновите\x20страницу.','error','length','loadProgress','elements','hints','closeModalBtn','setMapDimensions','hideWelcomeScreen','debug-submit-btn','mapWidthPx','addEventListener','get','volume','200ciuCZA','saveProgress','showQuestUI','alreadyScanned','hideHint','audioFile'];_0x14b5=function(){return _0x2cdac1;};return _0x14b5();}async function initializeApp(){const _0x53d351=_0x1b80;debugUrlInput=document[_0x53d351(0x130)](_0x53d351(0x13a)),debugSubmitBtn=document[_0x53d351(0x130)](_0x53d351(0x119));try{const _0x5a1adb=await fetch('./config.json');config=await _0x5a1adb[_0x53d351(0x13e)]();}catch(_0x24adaa){return console['error']('Не\x20удалось\x20загрузить\x20файл\x20конфигурации!',_0x24adaa),void alert(_0x53d351(0x110));}_0x195ebf[_0x53d351(0x117)](config[_0x53d351(0x11a)],config['mapHeightPx']),sound=new Audio(config[_0x53d351(0x123)]),sound[_0x53d351(0x11d)]=0.7,html5QrCode=new Html5Qrcode(_0x53d351(0x14a)),setupEventListeners();const _0x4c64ed=_0x310de5[_0x53d351(0x113)]();_0x195ebf[_0x53d351(0x138)](_0x4c64ed),_0x195ebf['updateProgressIndicator'](_0x310de5[_0x53d351(0x10e)](),config[_0x53d351(0x134)]),_0x4c64ed[_0x53d351(0x112)]>0x0?(_0x195ebf[_0x53d351(0x120)](),_0x195ebf[_0x53d351(0x146)]()):(_0x195ebf['showWelcomeScreen'](config[_0x53d351(0x12c)],config[_0x53d351(0x147)]),_0x195ebf[_0x53d351(0x136)]()),_0x310de5[_0x53d351(0x143)](config[_0x53d351(0x134)])&&_0x195ebf['showFinalScreen'](config[_0x53d351(0x149)]);}document['addEventListener'](_0x1ed99c(0x10c),initializeApp);